<!DOCTYPE html>
<html>
<head>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Retro Hoops</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: #111;
}

canvas {
    display: block;
}
</style>
</head>
</head>
<body>

<canvas id="game"></canvas>

<div id="controls">
    <div id="steal" class="btn">STEAL</div>
    <div style="display:flex; gap:20px;">
        <div id="pass" class="btn">PASS</div>
        <div id="shoot" class="btn">SHOOT</div>
    </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resizeGame() {
    if (window.innerWidth < window.innerHeight) {
        canvas.width = window.innerHeight;
        canvas.height = window.innerWidth;
    } else {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
}
resizeGame();
window.addEventListener("resize", resizeGame);

let players = [];
let userPlayer = null;
let ball = { x: 0, y: 0, holder: null };
let score = 0;

class Player {
    constructor(x, y, team) {
        this.x = x;
        this.y = y;
        this.team = team;
        this.radius = 15;
        this.hasBall = false;
    }

    draw() {
        ctx.beginPath();
        ctx.fillStyle = this.team === "home" ? "white" : "black";
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fill();
    }

    moveToward(tx, ty) {
        let dx = tx - this.x;
        let dy = ty - this.y;
        let dist = Math.sqrt(dx*dx + dy*dy);

        if (dist > 1) {
            this.x += dx / dist * 2;
            this.y += dy / dist * 2;
        }
    }
}

function createTeams() {
    for (let i = 0; i < 5; i++) {
        players.push(new Player(100, 150 + i*80, "home"));
        players.push(new Player(canvas.width - 100, 150 + i*80, "away"));
    }

    userPlayer = players[0];
    userPlayer.hasBall = true;
    ball.holder = userPlayer;
}

function drawCourt() {
    ctx.fillStyle = "#d68b30";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    ctx.strokeStyle = "white";
    ctx.beginPath();
    ctx.moveTo(canvas.width/2, 0);
    ctx.lineTo(canvas.width/2, canvas.height);
    ctx.stroke();
}

function update() {
    drawCourt();

    players.forEach(p => {
        if (p.team === "away") {
            p.moveToward(ball.holder.x, ball.holder.y);
        }
        p.draw();
    });

    if (ball.holder) {
        ball.x = ball.holder.x;
        ball.y = ball.holder.y;
    }

    ctx.beginPath();
    ctx.fillStyle = "orange";
    ctx.arc(ball.x, ball.y, 8, 0, Math.PI * 2);
    ctx.fill();

    ctx.fillStyle = "white";
    ctx.font = "20px Arial";
    ctx.fillText("Score: " + score, 20, 30);

    requestAnimationFrame(update);
}

canvas.addEventListener("touchmove", function(e){
    let touch = e.touches[0];
    userPlayer.moveToward(touch.clientX, touch.clientY);
});

document.getElementById("pass").ontouchstart = function() {
    let teammates = players.filter(p => p.team === "home");
    let next = teammates[Math.floor(Math.random()*teammates.length)];
    userPlayer.hasBall = false;
    next.hasBall = true;
    userPlayer = next;
    ball.holder = userPlayer;
};

document.getElementById("shoot").ontouchstart = function() {
    score += 2;
};

document.getElementById("steal").ontouchstart = function() {
    players.forEach(p => {
        if (p.team === "away" && p.hasBall) {
            p.hasBall = false;
            userPlayer.hasBall = true;
            ball.holder = userPlayer;
        }
    });
};

createTeams();
update();
</script>

</body>
</html>
