<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Retro Hoops</title>
<style>
html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: #d68b30;
    touch-action: none;
}

#gameContainer {
    position: relative;
    width: 100vw;
    height: 90vh;
    margin: 0 auto;
    background: #d68b30;
}

canvas {
    width: 100%;
    height: 100%;
    display: block;
}

/* Buttons */
#controls {
    position: absolute;
    bottom: 10px;
    right: 10px;
    display: flex;
    gap: 10px;
}

.btn {
    width: 90px;
    height: 45px;
    background: black;
    color: white;
    border-radius: 6px;
    text-align: center;
    line-height: 45px;
    font-weight: bold;
    font-size: 16px;
}

/* Joystick */
#joystickBase {
    position: absolute;
    bottom: 20px;
    left: 20px;
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: rgba(0,0,0,0.3);
}

#joystickStick {
    position: absolute;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: rgba(255,255,255,0.8);
    left: 30px;
    top: 30px;
}
</style>
</head>
<body>

<div id="gameContainer">
    <canvas id="game"></canvas>

    <div id="joystickBase">
        <div id="joystickStick"></div>
    </div>

    <div id="controls">
        <div id="passBtn" class="btn">PASS</div>
        <div id="shootBtn" class="btn">SHOOT</div>
    </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = canvas.parentElement.clientWidth;
canvas.height = canvas.parentElement.clientHeight;

const joystickBase = document.getElementById("joystickBase");
const joystickStick = document.getElementById("joystickStick");
const passBtn = document.getElementById("passBtn");
const shootBtn = document.getElementById("shootBtn");

let player = {x: 100, y: canvas.height/2, radius: 15, speed: 3};
let ball = {x: player.x, y: player.y};
let score = 0;

/* =========================
   JOYSTICK LOGIC
========================= */

let dragging = false;
const baseRadius = 60;
const stickRadius = 30;

function resetStick(){
    joystickStick.style.left = "30px";
    joystickStick.style.top = "30px";
}

joystickBase.addEventListener("touchstart", e=>{
    dragging = true;
});

joystickBase.addEventListener("touchmove", e=>{
    if(!dragging) return;

    const rect = joystickBase.getBoundingClientRect();
    const touch = e.touches[0];

    let dx = touch.clientX - (rect.left + baseRadius);
    let dy = touch.clientY - (rect.top + baseRadius);

    const distance = Math.sqrt(dx*dx + dy*dy);

    // LIMIT movement to circle radius
    if(distance > baseRadius){
        dx = dx / distance * baseRadius;
        dy = dy / distance * baseRadius;
    }

    joystickStick.style.left = (dx + baseRadius - stickRadius) + "px";
    joystickStick.style.top = (dy + baseRadius - stickRadius) + "px";

    // Move player
    player.x += dx * 0.05;
    player.y += dy * 0.05;
});

joystickBase.addEventListener("touchend", e=>{
    dragging = false;
    resetStick();
});

/* =========================
   BUTTONS
========================= */

passBtn.ontouchstart = function(){
    // simple pass animation
    player.x += 20;
};

shootBtn.ontouchstart = function(){
    // simple shoot logic
    if(player.x > canvas.width - 120){
        score += 2;
    }
};

/* =========================
   DRAW LOOP
========================= */

function drawCourt(){
    ctx.fillStyle="#d68b30";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // middle line
    ctx.strokeStyle="white";
    ctx.lineWidth=3;
    ctx.beginPath();
    ctx.moveTo(canvas.width/2,0);
    ctx.lineTo(canvas.width/2,canvas.height);
    ctx.stroke();

    // hoop
    ctx.beginPath();
    ctx.strokeStyle="orange";
    ctx.arc(canvas.width-40, canvas.height/2, 15, 0, Math.PI*2);
    ctx.stroke();
}

function update(){
    drawCourt();

    // draw player
    ctx.beginPath();
    ctx.fillStyle="white";
    ctx.arc(player.x, player.y, player.radius, 0, Math.PI*2);
    ctx.fill();

    // draw ball
    ball.x = player.x;
    ball.y = player.y;
    ctx.beginPath();
    ctx.fillStyle="orange";
    ctx.arc(ball.x, ball.y, 6, 0, Math.PI*2);
    ctx.fill();

    ctx.fillStyle="white";
    ctx.font="18px Arial";
    ctx.fillText("Score: " + score, 20, 30);

    requestAnimationFrame(update);
}

resetStick();
update();
</script>

</body>
</html>
